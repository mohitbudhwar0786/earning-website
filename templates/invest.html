{% extends "base.html" %}

{% block title %}Invest - EarnDaily{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-10">
        {% if has_reached_limit %}
            <!-- Investment Limit Reached Message -->
            <div class="text-center mb-5" data-aos="fade-down">
                <h1 class="text-white mb-3">
                    <i class="fas fa-trophy me-2"></i>Investment Limit Reached!
                </h1>
                <p class="text-white-50">Congratulations! You've maximized your investment potential.</p>
            </div>
            
            <div class="card" data-aos="fade-up">
                <div class="card-header bg-warning text-dark text-center">
                    <h4 class="mb-0"><i class="fas fa-star"></i> Maximum Investment Achieved!</h4>
                </div>
                <div class="card-body text-center">
                    <div class="mb-4">
                        <h5 class="text-success mb-3">You've invested: <span class="fw-bold text-primary">â‚¹{{ "%g"|format(total_investment) }}</span></h5>
                        <div class="progress mb-3">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 100%;"></div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info mb-4" role="alert">
                        <i class="fas fa-rocket"></i>
                        <strong>We're working to increase investment limits soon!</strong><br>
                        Meanwhile, boost your earnings with our fantastic referral program.
                    </div>
                    
                    <div class="row text-center mb-4">
                        <div class="col-md-4 mb-3">
                            <div class="p-3 bg-light rounded-3">
                                <i class="fas fa-users text-primary fs-3 mb-2"></i>
                                <h6 class="text-muted mb-1">Your Referrals</h6>
                                <h4 class="text-primary">{{ referral_count }}</h4>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="p-3 bg-light rounded-3">
                                <i class="fas fa-coins text-success fs-3 mb-2"></i>
                                <h6 class="text-muted mb-1">Daily Referral Bonus</h6>
                                <h4 class="text-success">â‚¹{{ "%g"|format(referral_bonus) }}</h4>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="p-3 bg-light rounded-3">
                                <i class="fas fa-calendar-alt text-warning fs-3 mb-2"></i>
                                <h6 class="text-muted mb-1">Monthly Extra</h6>
                                <h4 class="text-warning">â‚¹{{ "%g"|format(referral_bonus * 30) }}</h4>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h5 class="mb-3">ðŸ’° Referral Bonuses Available:</h5>
                        <div class="row text-center">
                            <div class="col-4">
                                <div class="p-3 border rounded bg-light">
                                    <small class="text-muted d-block">â‚¹500 Plan</small>
                                    <strong class="text-success fs-5">â‚¹10/day</strong>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="p-3 border rounded bg-light">
                                    <small class="text-muted d-block">â‚¹1000 Plan</small>
                                    <strong class="text-success fs-5">â‚¹25/day</strong>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="p-3 border rounded bg-light">
                                    <small class="text-muted d-block">â‚¹2000 Plan</small>
                                    <strong class="text-success fs-5">â‚¹60/day</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-grid gap-3 mb-4">
                        <a href="{{ url_for('profile') }}" class="btn btn-success btn-lg">
                            <i class="fas fa-share-alt me-2"></i>Start Referring Friends
                        </a>
                        <a href="{{ url_for('dashboard') }}" class="btn btn-outline-primary">
                            <i class="fas fa-home me-2"></i>Back to Dashboard
                        </a>
                    </div>
                    
                    <div class="alert alert-light border">
                        <i class="fas fa-lightbulb text-warning me-2"></i>
                        <strong>Pro Tip:</strong> Each successful referral can earn you up to â‚¹60/day! 
                        Share your referral code: <strong class="text-primary">{{ user.referral_code }}</strong>
                    </div>
                </div>
            </div>
        {% else %}
            <!-- Header Section -->
            <div class="text-center mb-5" data-aos="fade-down">
                <h1 class="text-white mb-3">
                    <i class="fas fa-chart-line me-2"></i>Investment Plans
                </h1>
                <p class="text-white-50">Choose your investment amount and start earning guaranteed daily returns</p>
                {% if total_investment > 0 %}
                    <div class="alert alert-info d-inline-block mt-3">
                        <i class="fas fa-info-circle me-2"></i>
                        Current: <strong>â‚¹{{ "%g"|format(total_investment) }}</strong> | 
                        Limit: <strong>â‚¹2000</strong> | 
                        Remaining: <strong>â‚¹{{ "%g"|format(2000 - total_investment) }}</strong>
                    </div>
                {% endif %}
            </div>
        {% endif %}
        
        {% if not has_reached_limit %}
        <div class="card">
            <div class="card-body">
                <h3 class="card-title text-center text-primary mb-5" data-aos="fade-up">
                    <i class="fas fa-rocket me-2"></i>Start Your Earning Journey
                </h3>
                
                <form method="POST" id="investmentForm">
                    <div class="row justify-content-center">
                        <div class="col-md-4 mb-4">
                            <div class="investment-card p-4" onclick="selectPlan(500)" id="plan-500" data-aos="fade-up" data-aos-delay="100">
                                <div class="text-center">
                                    <div class="position-relative mb-3">
                                        <i class="fas fa-star text-warning position-absolute" style="top: -10px; right: 10px;"></i>
                                    </div>
                                    <h4 class="text-primary mb-3">Starter Plan</h4>
                                    <div class="mb-3">
                                        <h2 class="text-primary">â‚¹500</h2>
                                        <small class="text-muted">One-time Investment</small>
                                    </div>
                                    <div class="mb-3">
                                        <h3 class="text-success">â‚¹30</h3>
                                        <small class="text-muted">Daily Return</small>
                                    </div>
                                    <div class="mb-3">
                                        <p class="text-muted small">
                                            <i class="fas fa-check text-success me-1"></i>6% Daily Return<br>
                                            <i class="fas fa-check text-success me-1"></i>Referral Bonus Eligible<br>
                                            <i class="fas fa-check text-success me-1"></i>Instant Activation
                                        </p>
                                    </div>
                                    <input type="radio" name="amount" value="500" id="amount-500" style="display: none;">
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-4">
                            <div class="investment-card p-4" onclick="selectPlan(1000)" id="plan-1000" data-aos="fade-up" data-aos-delay="200">
                                <div class="text-center">
                                    <div class="position-relative mb-3">
                                        <i class="fas fa-crown text-warning position-absolute" style="top: -10px; right: 10px;"></i>
                                    </div>
                                    <h4 class="text-primary mb-3">Premium Plan</h4>
                                    <div class="mb-3">
                                        <h2 class="text-primary">â‚¹1,000</h2>
                                        <small class="text-muted">One-time Investment</small>
                                    </div>
                                    <div class="mb-3">
                                        <h3 class="text-success">â‚¹70</h3>
                                        <small class="text-muted">Daily Return</small>
                                    </div>
                                    <div class="mb-3">
                                        <p class="text-muted small">
                                            <i class="fas fa-check text-success me-1"></i>7% Daily Return<br>
                                            <i class="fas fa-check text-success me-1"></i>Higher Referral Bonus<br>
                                            <i class="fas fa-check text-success me-1"></i>Priority Support
                                        </p>
                                    </div>
                                    <input type="radio" name="amount" value="1000" id="amount-1000" style="display: none;">
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4 mb-4">
                            <div class="investment-card p-4" onclick="selectPlan(2000)" id="plan-2000" data-aos="fade-up" data-aos-delay="300">
                                <div class="text-center">
                                    <div class="position-relative mb-3">
                                        <i class="fas fa-gem text-warning position-absolute" style="top: -10px; right: 10px;"></i>
                                    </div>
                                    <h4 class="text-primary mb-3">VIP Plan</h4>
                                    <div class="mb-3">
                                        <h2 class="text-primary">â‚¹2,000</h2>
                                        <small class="text-muted">One-time Investment</small>
                                    </div>
                                    <div class="mb-3">
                                        <h3 class="text-success">â‚¹150</h3>
                                        <small class="text-muted">Daily Return</small>
                                    </div>
                                    <div class="mb-3">
                                        <p class="text-muted small">
                                            <i class="fas fa-check text-success me-1"></i>7.5% Daily Return<br>
                                            <i class="fas fa-check text-success me-1"></i>Maximum Referral Bonus<br>
                                            <i class="fas fa-check text-success me-1"></i>VIP Support
                                        </p>
                                    </div>
                                    <input type="radio" name="amount" value="2000" id="amount-2000" style="display: none;">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-4" data-aos="zoom-in" data-aos-delay="400">
                        <button type="submit" class="btn btn-primary btn-lg" id="investBtn" disabled>
                            <i class="fas fa-credit-card me-2"></i>Confirm Investment
                        </button>
                    </div>
                </form>
                
                <div class="row mt-5" data-aos="fade-up" data-aos-delay="500">
                    <div class="col-12">
                        <div class="alert alert-info">
                            <h6><i class="fas fa-info-circle me-2"></i>Important Information:</h6>
                            <ul class="mb-0">
                                <li>Daily earnings are calculated and credited automatically every day at midnight</li>
                                <li>Referral bonuses are 10% of your referrals' daily earnings</li>
                                <li>You can make multiple investments to increase your daily earnings</li>
                                <li>All investments are active immediately after confirmation</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
let selectedAmount = null;

function selectPlan(amount) {
    // Remove previous selection
    document.querySelectorAll('.investment-card').forEach(card => {
        card.classList.remove('selected');
    });
    
    // Add selection to clicked card
    document.getElementById(`plan-${amount}`).classList.add('selected');
    document.getElementById(`amount-${amount}`).checked = true;
    
    selectedAmount = amount;
    document.getElementById('investBtn').disabled = false;
}
</script>
{% endblock %}
